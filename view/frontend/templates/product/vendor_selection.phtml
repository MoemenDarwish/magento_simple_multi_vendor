<?php
/**
 * @var \Vendor\MultiVendor\Block\Product\VendorSelection $block
 */
$similarProducts = $block->getSimilarProducts();
?>

<?php if ($similarProducts->getSize() > 0): ?>
<div class="vendor-selection-container">
    <h3><?= __('Available from Multiple Vendors') ?></h3>
    <div class="vendor-list">
        <?php foreach ($similarProducts as $vendorProduct): ?>
            <div class="vendor-item">
                <div class="vendor-info">
                    <h4><?= $block->escapeHtml($vendorProduct->getShopName()) ?></h4>
                    <p class="vendor-name"><?= $block->escapeHtml($vendorProduct->getName()) ?></p>
                </div>
                <div class="vendor-price">
                    <span class="price"><?= $block->getPriceHtml($vendorProduct->getPrice()) ?></span>
                </div>
                <div class="vendor-actions">
                    <button type="button" 
                            class="action primary select-vendor" 
                            data-vendor-id="<?= $block->escapeHtmlAttr($vendorProduct->getVendorId()) ?>"
                            data-product-id="<?= $block->escapeHtmlAttr($block->getProduct()->getId()) ?>">
                        <?= __('Select this Vendor') ?>
                    </button>
                </div>
            </div>
        <?php endforeach; ?>
    </div>
</div>

<script type="text/x-magento-init">
{
    "*": {
        "Vendor_MultiVendor/js/vendor-selection": {}
    }
}
</script>
<?php endif; ?> 